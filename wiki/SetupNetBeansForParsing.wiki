#summary Setup NetBeans environment for parsing, run parser.
#labels Phase-Implementation,MySQL,MRD,parsing

= Connect.java =

Open file `wikipedia.sql.Connect.java`.

Add lines:
{{{
// English Wiktionary database
public final static String ENWIKT_DB = "enwikt20100824?useUnicode=false&characterEncoding=ISO8859_1&autoReconnect=true&useUnbufferedInput=false";

// English Wiktionary parsed database
public final static String ENWIKT_PARSED_DB = "enwikt20100824_parsed?useUnicode=false&characterEncoding=ISO8859_1&autoReconnect=true&useUnbufferedInput=false";
}}}

= PageTableAll.java =

Check the file [http://code.google.com/p/wikokit/source/browse/trunk/wikt_parser/src/wikt/parser/PageTableAll.java PageTableAll.java].

This line:
{{{
DEBUG_PAGES = true;
}}}
should be changed to:
{{{
DEBUG_PAGES = false;
}}}

= wikt_parser =

  * Set *wikt_parser* as a main project in !NetBeans.
  * Compile it.
  * Open project properties / Run. Set:
    * Main class: *`wikt.parser.Main`*
    * Arguments: *`en 0`*
    * VM options: `-Xms1212m -Xmx1212m -Xmn16m -XX:+DisableExplicitGC -verbose:gc`
  * Run main project (test that parser works without error).

= Run parser =

Create directory for the parser, copy project files, run .bat file:
{{{
$mkdir /enwikt20100824/wikt_parser

wikt_parser/run_wikt_parser.bat
wikt_parser/dist/wikt_parser.jar
wikt_parser/dist/lib/common_wiki.jar
wikt_parser/dist/lib/mysql-connector-java-5.1.13-bin.jar

mysql$ DROP DATABASE enwikt20100824_parsed;
mysql$ CREATE DATABASE enwikt20100824_parsed;
mysql$ USE enwikt20100824_parsed
mysql$ SOURCE D:\all\projects\java\synonyms\wikokit\wikt_parser\doc\wikt_parsed_empty.sql
}}}

Read twice very attentively parameters of your MySQL config file (tune your server to make it as fast as possible):
{{{
NET STOP MySQL
gvim "C:\w\MySQL\MySQL Server 5.1\my.ini"
NET START MySQL
}}}

OK. Run it:
{{{
$cd /enwikt20100824/wikt_parser
$run_wikt_parser.bat en 0
}}}

= Analyze MySQL slow requests log file =

Dump result Wiktionary parsed database, then:
{{{
NET STOP mysql     % stop MySQL server
cd "D:\w\MySQL\MySQL Server 5.1\log\mysqld.slow.log" 
rename mysqld.slow.log mysqld.slow.log_enwikt20111008.log
gvim mysqld.slow.log_enwikt20111008.log
}}}

Sort lines in VIM:
{{{
gvim$:sort u
}}}

Analyze requests and try to find the most common and useless repetitive requests, then change Java source code in order to avoid such requests.

= Previous step =
  * [File_wikt_parsed_empty_sql Load empty Wiktionary parsed database into MySQL]

= Next step =
  * [SQLite Convert the Wiktionary parsed database (MySQL) into SQLite file]